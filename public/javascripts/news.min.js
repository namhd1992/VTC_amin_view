var editing_item=null,item_name="Article",item_names="Articles",deleted_id=null,page_datatable=null,Page_script=function(){return{init:function(){}}}(),load_page=function(){_send_info.data={limit:1e4,offset:0},$(".bs-select").selectpicker({iconBase:"fa",tickIcon:"fa-check"}),page_datatable=$("#page_datatable").DataTable({ajax:{url:base_request_url+"/allNewFeeds",type:"POST",data:function(t){return JSON.stringify(_send_info.data)},contentType:"application/json",dataType:"json",dataSrc:function(t){return console.log(t),console.log("custom"),t.dataArr},beforeSend:function(t){t.setRequestHeader("Authorization","bearer "+_user_data.access_token)},error:function(t,e,a){"invalid_token"==JSON.parse(t.responseText).error&&(localStorage.removeItem("user_data"),document.location.replace("login"))}},columns:[{title:"News",data:null,render:function(t,e,a,i){var d=(a.title,a.title),n=a.defaultImage,l=new Date(a.createOn),s=_month_names[l.getMonth()]+" "+l.getDate()+", "+l.getFullYear(),o="";return o+="<ul>",o+='<li class="mt-list-item">',o+='<div class="list-icon-container">',o+="<a class='btn-link btn_edit_item btn btn-primary' item_id='"+a.id+"' item_obj='"+JSON.stringify(a)+"'><i class='icon-wrench'></i> Edit </a>",o+='<a href="new_details?id='+a.id+'" class="btn-link btn btn-primary" ><i class="icon-bubbles"></i> Comments ('+a.numberComment+") </a>",o+="</div>",o+='<div class="list-thumb">',o+='<a href="javascript:;">',o+='<img alt="" src='+n+" />",o+="</a>",o+="</div>",o+='<div class="list-datetime bold uppercase font-red">'+s+"</div>",o+='<div class="list-item-content">',o+="<div>"+d+"</div>",o+="</div>",o+="</li>",o+="</ul>"}}],aoColumnDefs:[{sWidth:"100%",aTargets:[0]}],autoWidth:!1,lengthChange:!1,info:!1,bSort:!1,bPaginate:!0,pagingType:"numbers",fnDrawCallback:function(t){$(".mt-list-item").mouseover(function(){$(this).find(".list-icon-container").show()}),$(".mt-list-item").mouseout(function(){$(this).find(".list-icon-container").hide()}),$("#page_datatable thead").remove(),$("div.dataTables_wrapper div.dataTables_filter label").contents().filter(function(){return 1!=this.nodeType}).replaceWith(""),$("div.dataTables_wrapper div.dataTables_filter label input").addClass("form-control"),$("div.dataTables_wrapper div.dataTables_filter label input").addClass("input-inline"),$("div.dataTables_wrapper div.dataTables_filter label input").addClass("input-medium"),$("div.dataTables_wrapper div.dataTables_filter label input").attr("placeholder","Search..."),$("div.dataTables_wrapper div.dataTables_filter label input").attr("id","inputSuccess"),$("#page_datatable tbody").addClass("mt-list-container list-news ext-1"),$("#page_datatable").addClass("mt-element-list"),$(".btn_edit_item").click(function(){var t=JSON.parse($(this).attr("item_obj"));editing_item=t.id,$("#modal_add_edit .modal-title").html("Edit "+item_name+" "+t.id),$("#modal_add_edit .txt_add_edit_item_name").val(t.title),$("#modal_add_edit .txt_add_edit_item_img").val(t.defaultImage),jQuery(".select_status option").filter(function(){return $.trim($(this).val())==t.status}).prop("selected",!0),$(".select_status").selectpicker("refresh"),"active"==t.status?$(".select_status button").css("background-color","#32c5d2"):$(".select_status button").css("background-color","red"),$("#modal_add_edit").modal("show")}),$(".btn_delete_item").click(function(){deleted_id=parseInt($(this).attr("item_id")),$("#modal_confirm").modal("show")})}}),$(".btn_add_new_item").click(function(){$("#modal_add_edit .modal-title").html("Create new "+item_name),$("#modal_add_edit .txt_add_edit_item_name").val(),$("#modal_add_edit .btn_modal_save_new").show(),$("#modal_add_edit .btn_modal_save_update").hide(),$("#modal_add_edit").modal("show")}),$("#page_datatable").on("order.dt",function(){console.log("Order")}).on("search.dt",function(){console.log("Search")}).on("page.dt",function(){console.log("paging")}).dataTable()};jQuery(document).ready(function(){Page_script.init(),load_page(),$(".btn_modal_save_update").click(function(){console.log(editing_item),_send_info.data={title:$(".txt_add_edit_item_name").val(),status:$(".select_status option:selected").val(),defaultImage:$(".txt_add_edit_item_img").val(),newsId:editing_item},$.ajax({url:base_request_url+"/article",type:"PUT",data:JSON.stringify(_send_info.data),contentType:"application/json",dataType:"json",beforeSend:function(t){t.setRequestHeader("Authorization","bearer "+_user_data.access_token)},success:function(){_send_info.data={limit:1e4,offset:0},page_datatable.ajax.reload(),$("#modal_add_edit").modal("hide"),show_toast_notif("success","Successfully","Updated '"+$(".txt_add_edit_item_name").val()+"'",function(){})},error:function(t){show_toast_notif("error","Successfully","Error '"+t.responseText+"'",function(){})}})}),$(".select_status").change(function(){"active"==$(this).val()?$(".select_status button").css("background-color","#32c5d2"):"inactive"==$(this).val()&&$(".select_status button").css("background-color","red")})});