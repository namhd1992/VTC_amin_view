function str_pad(e){return String("00"+e).slice(-2)}function objectifyForm(e){for(var t={},a=0;a<e.length;a++)t[e[a].name]=e[a].value;return t}var editing_item=null,item_name="shop item",item_names="shop items",deleted_id=null,search_value=null,page_datatable=null,deleted_obj=null,load_autocomplete_component=null;_current_page=1;var typingTimer,doneTypingInterval=500,searching_value_timeout="",img_array=[],imageCarosel=null,linkImage=null,linkOldImage=null,flagNewImage=!1,Page_script={init:function(){}},load_page=function(){function e(e){if(flagNewImage){var a=new FormData;a.append("image",imageCarosel),$.ajax({url:base_request_url+"/admin/uploadImage",type:"POST",data:a,cache:!1,async:!1,contentType:!1,timeout:3e6,processData:!1,beforeSend:function(e){e.setRequestHeader("Authorization","bearer "+_user_data.access_token)},success:function(a){"01"==a.status?(console.log(a),linkImage=a.data,t(e)):show_toast_notif("error","Fail","Upload Image Unsuccess"),$(".loading_icon").hide()},error:function(e){show_toast_notif("error","Fail","Error '"+e.message+"'"),$(".loading_icon").hide()}})}}function t(e){flagNewImage&&(_send_info.data={urlImage:linkOldImage},$.ajax({url:base_request_url+"/admin/deleteImage",type:"POST",data:JSON.stringify(_send_info.data),cache:!1,async:!1,contentType:"application/json",dataType:"json",beforeSend:function(e){e.setRequestHeader("Authorization","bearer "+_user_data.access_token)},success:function(e){page_datatable.ajax.reload(null,!1),"01"==e.status?(console.log(e),show_toast_notif("success","Successfully","Add new and Delete old image success")):(show_toast_notif("error","Fail",e.message),$(".loading_icon").hide())},error:function(e){show_toast_notif("error","Fail","Error '"+e.message+"'"),$(".loading_icon").hide()}}))}CKEDITOR.replace("des",{height:"300px"});var a=function(e){img_array.splice(img_array.indexOf(e),1)};_send_info.data={limit:_per_page,offset:_per_page*(_current_page-1)},$(".bs-select").selectpicker({iconBase:"fa",tickIcon:"fa-check"}),$(".giftcode_group").hide(),page_datatable=$("#page_datatable").DataTable({ajax:{url:base_request_url+"/admin/shopingItem",type:"GET",data:function(e){null!=search_value&&""!=search_value&&(e.searchValue=search_value),e.limit=_per_page,e.offset=_per_page*(_current_page-1)},contentType:"application/json",dataType:"json",dataSrc:function(e){var t=0;if($(".datatable_paging").html(""),e.totalRecords>_per_page)for(t=1;t<=Math.ceil(e.totalRecords/_per_page);t++)t==_current_page?$(".datatable_paging").append("<span class='datatable_paging_number_active' page="+t+">"+t+"</span>"):1!=t&&t!=Math.ceil(e.totalRecords/_per_page)&&t!=_current_page-1&&t!=_current_page-2&&t!=_current_page+2&&t!=_current_page+1||(1==t&&_current_page>4?($(".datatable_paging").append("<span class='datatable_paging_number' page="+t+">"+t+"</span>"),$($(".datatable_paging_number")[0]).after("<span class='paging_truncate'>...</span>")):t==Math.ceil(e.totalRecords/_per_page)&&_current_page<Math.ceil(e.totalRecords/_per_page)-3?($(".datatable_paging").append("<span class='datatable_paging_number' page="+t+">"+t+"</span>"),$($(".datatable_paging_number")[$(".datatable_paging_number").length-1]).before("<span class='paging_truncate'>...</span>")):$(".datatable_paging").append("<span class='datatable_paging_number' page="+t+">"+t+"</span>"));else $(".datatable_paging").html("<span class='datatable_paging_number_active' page=1>1</span>");return $(".datatable_paging_number").click(function(e){_current_page=parseInt($(e.target).attr("page")),page_datatable.ajax.reload()}),null!=e.data?e.data:[]},beforeSend:function(e){e.setRequestHeader("Authorization","bearer "+_user_data.access_token)},error:function(e,t,a){"invalid_token"==JSON.parse(e.responseText).error&&(localStorage.removeItem("user_data"),document.location.replace("login"))}},columns:[{title:"ID",data:"shopingItem.id"},{title:"Name",data:"shopingItem.name"},{title:"Type",data:null,render:function(e,t,a,i){var o;switch(a.shopingItem.itemType){case 1:o="Normal";break;case 2:o="Giftcode";break;case 3:o="Event"}return o}},{title:"Status",data:null,render:function(e,t,a,i){return e="active"==a.shopingItem.status?"<div class='active_status'>"+a.shopingItem.status+"</div>":"<div class='inactive_status'>"+a.shopingItem.status+"</div>",e}},{title:"Create On",data:null,render:function(e,t,a,i){var o=moment(a.shopingItem.createOn).format("YYYY-MMMM-D HH:mm");return o}},{title:"Action",data:null,render:function(e,t,a,i){var o="";return o+="<a class='btn_edit_item' item_id='"+a.shopingItem.id+"' item_obj='"+JSON.stringify(a)+"'><i class='icon-wrench'></i> Edit </a>",o+="<a class='btn_delete_item' item_id='"+a.shopingItem.id+"' item_obj='"+JSON.stringify(a)+"'><i class='icon-trash'></i> Delete </a>",o}}],aoColumnDefs:[{sWidth:"2%",aTargets:[0]},{sWidth:"10%",aTargets:[1]},{sWidth:"5%",aTargets:[2]},{sWidth:"3%",aTargets:[3]},{sWidth:"7%",aTargets:[4]},{sWidth:"10%",aTargets:[5]}],autoWidth:!1,lengthChange:!1,info:!1,bSort:!1,bFilter:!1,bPaginate:!1,fnDrawCallback:function(e){$("div.dataTables_wrapper div.dataTables_filter label").contents().filter(function(){return 1!=this.nodeType}).replaceWith(""),$(".btn_edit_item").click(function(){var e=JSON.parse($(this).attr("item_obj")),t=e.shopingItem,i=e.promotion;editing_item=t.id,$("#modal_add_edit .modal-title").html("Edit "+item_name+" "+t.name),$("#modal_add_edit .txt_add_edit_item_name").val(t.name),$("#modal_add_edit .txt_add_edit_item_quantity").val(t.quantity),3==t.itemType&&$("#modal_add_edit .txt_add_edit_item_package_id").val(t.packageId),$("#modal_add_edit .txt_add_edit_item_price").val(t.price),$("#modal_add_edit #single_select_coin_type").val(t.coinType),$("#modal_add_edit .txt_add_edit_item_gender").val(t.firstType),$("#modal_add_edit .txt_add_edit_item_category").val(t.secondType),$("#modal_add_edit .txt_add_edit_item_des").val(t.description),$("#modal_add_edit .uploaded_giftcode").val(t.urlGiftcodeFile),$("#modal_add_edit #single_select_hot_title").val(t.hotTitle),$("#modal_add_edit #single_select_item_type").val(t.itemType),$("#modal_add_edit #single_select_shop").val(t.shopId),$("#modal_add_edit #single_select_gender").val(t.firstType),$("#modal_add_edit #single_select_category").val(t.secondType),$("#modal_add_edit .image_item_icon").html("<img src="+t.defaultImage+" />"),$("#modal_add_edit .image_item_big_image").html("<img src="+t.bigImage+" />"),2==t.itemType?($(".giftcode_group").show(),$(".form-package").hide()):3==t.itemType?($(".form-package").show(),$(".giftcode_group").hide()):($(".giftcode_group").hide(),$(".form-package").hide()),""!=t.urlGiftcodeFile?$("#modal_add_edit .image_item_giftcode").html("<img src='http://icons.iconarchive.com/icons/alecive/flatwoken/128/Apps-Google-Drive-Sheets-icon.png' />"):$("#modal_add_edit .image_item_giftcode").html(""),void 0!==CKEDITOR.instances.des&&CKEDITOR.instances.des.destroy(),CKEDITOR.replace("des",{height:"300px"}),CKEDITOR.instances.des.setData(t.description),$(".image_item").html(""),img_array=[],null!==t.screenShot&&$.each(t.screenShot.split(","),function(e,t){""!==t&&($(".image_item").append(" <img class='remove_image' src='"+t+"' />"),img_array.push(t))}),$(".remove_image").click(function(){a($(this).attr("src")),$(this).remove()}),$("#single_select_shop").val(t.shopId),load_autocomplete_component(),$("#modal_add_edit .btn_modal_save_new").hide(),$("#modal_add_edit .btn_modal_save_update").show(),$(".select_status option").filter(function(){return $.trim($(this).val())==t.status}).prop("selected",!0),$(".select_status").selectpicker("refresh"),"active"==t.status?$(".select_status button").css("background-color","#32c5d2"):$(".select_status button").css("background-color","red"),t.hasPromotion?($("[name='my-checkbox']").bootstrapSwitch("state",":checked"),$(".form-promotion input, .form-promotion select").removeAttr("disabled"),$("#promotion_select").val(i.shopPromotion),$(".txt_promotion_tag_view").val(i.tagView),$(".txt_promotion_price").val(i.newPrice),$(".txt_promotion_quantity").val(i.quantity)):($("[name='my-checkbox']").bootstrapSwitch("state",""),$(".form-promotion input, .form-promotion select").attr("disabled","disabled"),$(".form-promotion input, .form-promotion select").val("")),load_autocomplete_component(),$(".btn_delete_item").show(),$(".btn_delete_item").attr("item_id",t.id),$("#modal_add_edit").modal("show"),$(".txt_promotion_tag_view").change(function(){if($('input[name="is_sale_percent"]').prop("checked")){if(Number.isNaN(t.price/$(".txt_promotion_tag_view").val()))return show_toast_notif("error","Error","Sai định dạng % sale off",function(){}),void $("#is_sale_percent").parent().removeClass("checked");$(".txt_promotion_price").val(Math.round(t.price/$(".txt_promotion_tag_view").val()*1)/1)}}),$('input[name="is_sale_percent"]').change(function(){if($(this).prop("checked")){if(Number.isNaN(t.price/$(".txt_promotion_tag_view").val()))return show_toast_notif("error","Error","Sai định dạng % sale off",function(){}),void $("#is_sale_percent").parent().removeClass("checked");$(".txt_promotion_price").attr("disabled","disabled"),$(".txt_promotion_price").val(Math.round(t.price/$(".txt_promotion_tag_view").val()*1)/1)}else $(".txt_promotion_price").removeAttr("disabled")}),$(".txt_promotion_price").val()==Math.round(t.price/$(".txt_promotion_tag_view").val()*1)/1?($("#is_sale_percent").parent().addClass("checked"),$(".txt_promotion_price").attr("disabled","disabled")):($("#is_sale_percent").parent().removeClass("checked"),$(".txt_promotion_price").removeAttr("disabled"))}),$(".btn_delete_item").click(function(){var e=JSON.parse($(this).attr("item_obj")),t=e.shopingItem;deleted_obj=t,deleted_id=t.id,$("#modal_confirm").modal("show")})}}),$(".select2, .select2-multiple, .select2-allow-clear, .js-data-example-ajax").on("select2:open",function(){if($(this).parents("[class*='has-']").length)for(var e=$(this).parents("[class*='has-']")[0].className.split(/\s+/),t=0;t<e.length;++t)e[t].match("has-")&&$("body > .select2-container").addClass(e[t])}),load_autocomplete_component=function(){function e(e){if(e.loading)return e.text;var t="<div class='select2-result-repository clearfix'><div class='select2-result-repository__avatar'><img src='"+e.owner.avatar_url+"' /></div><div class='select2-result-repository__meta'><div class='select2-result-repository__title'>"+e.full_name+"</div>";return e.description&&(t+="<div class='select2-result-repository__description'>"+e.description+"</div>"),t+="<div class='select2-result-repository__statistics'><div class='select2-result-repository__forks'><span class='glyphicon glyphicon-flash'></span> "+e.forks_count+" Forks</div><div class='select2-result-repository__stargazers'><span class='glyphicon glyphicon-star'></span> "+e.stargazers_count+" Stars</div><div class='select2-result-repository__watchers'><span class='glyphicon glyphicon-eye-open'></span> "+e.watchers_count+" Watchers</div></div></div></div>",t}function t(e){return e.full_name||e.text}$.fn.select2.defaults.set("theme","bootstrap");var a="Please! Select";$(".select2, .select2-multiple").select2({placeholder:a,width:null}),$(".select2-allow-clear").select2({allowClear:!0,placeholder:a,width:null}),$(".js-data-example-ajax").select2({width:"off",ajax:{url:"https://api.github.com/search/repositories",dataType:"json",delay:250,data:function(e){return{q:e.term,page:e.page}},processResults:function(e,t){return{results:e.items}},cache:!0},escapeMarkup:function(e){return e},minimumInputLength:1,templateResult:e,templateSelection:t}),$("button[data-select2-open]").click(function(){$("#"+$(this).data("select2-open")).select2("open")}),$(":checkbox").on("click",function(){$(this).parent().nextAll("select").prop("disabled",!this.checked),1==$(this).val()&&$(this).parent().hasClass("checked")?($(".appname_group").show(),$(".txt_add_edit_item_package_android").attr("name","androidPackage"),$(".txt_add_edit_item_package_ios").attr("name","iosSchemes")):1!=$(this).val()||$(this).parent().hasClass("checked")||($(".appname_group").hide(),$(".txt_add_edit_item_package_android").attr("name",""),$(".txt_add_edit_item_package_ios").attr("name","")),3==$(this).val()&&$(this).parent().hasClass("checked")?($(".share_group").show(),$(".txt_add_edit_item_share").attr("name","urlShareFB")):3!=$(this).val()||$(this).parent().hasClass("checked")||($(".share_group").hide(),$(".txt_add_edit_item_share").attr("name",""))}),$(".js-btn-set-scaling-classes").on("click",function(){$("#select2-multiple-input-sm, #select2-single-input-sm").next(".select2-container--bootstrap").addClass("input-sm"),$("#select2-multiple-input-lg, #select2-single-input-lg").next(".select2-container--bootstrap").addClass("input-lg"),$(this).removeClass("btn-primary btn-outline").prop("disabled",!0)})},$(".date-picker").datepicker({rtl:App.isRTL(),orientation:"left",autoclose:!0}),$(".btn_add_new_item").click(function(){$(".image_item").html(""),$("#modal_add_edit .modal-title").html("Create new "+item_name),$("#modal_add_edit input:text").val(""),$("#modal_add_edit textarea").val(""),$("#modal_add_edit .txt_add_edit_item_start_amount").val(1),$("#modal_add_edit .txt_add_edit_item_price_step").val(1),$("#modal_add_edit .image_item_icon").html(""),$("#modal_add_edit .image_item_big_image").html(""),$("#modal_add_edit .image_item").html(""),void 0!==CKEDITOR.instances.des&&CKEDITOR.instances.des.destroy(),CKEDITOR.replace("des",{height:"300px"}),CKEDITOR.instances.des.setData(""),$(".select_status option").filter(function(){return"active"==$.trim($(this).val())}).prop("selected",!0),$(".select_status").selectpicker("refresh"),$(".select_status button").css("background-color","#32c5d2"),load_autocomplete_component(),$("#modal_add_edit .btn_modal_save_new").show(),$("#modal_add_edit .btn_modal_save_update").hide(),$("#modal_add_edit").modal("show")}),$(".btn_confirm_yes").click(function(){$.ajax({url:base_request_url+"/admin/shopingItem?id="+deleted_id,type:"DELETE",contentType:"application/json",dataType:"json",beforeSend:function(e){e.setRequestHeader("Authorization","bearer "+_user_data.access_token)},success:function(){$("#modal_confirm").modal("hide"),_send_info.data={},page_datatable.ajax.reload(),$("#modal_add_edit").modal("hide"),show_toast_notif("success","Successfully","Deleted: '"+deleted_obj.name+"'",function(){})},error:function(e){show_toast_notif("error","Error","'"+e.responseText+"'",function(){})}})}),$(".btn_modal_save_new").click(function(){if(""!=$(".txt_add_edit_item_name").val())if(3!=$("#single_select_item_type").val()||""!=$(".txt_add_edit_item_package_id").val()){if(_send_info.data={name:$(".txt_add_edit_item_name").val(),hotTitle:$("#single_select_hot_title").val(),packageId:$(".txt_add_edit_item_package_id").val(),price:$(".txt_add_edit_item_price").val(),coinType:$("#single_select_coin_type").val(),quantity:$(".txt_add_edit_item_quantity").val(),shopId:$("#single_select_shop").val(),defaultImage:$(".image_item_icon img").attr("src"),bigImage:$(".image_item_big_image img").attr("src"),firstType:$("#single_select_gender").val(),secondType:$("#single_select_category").val(),description:CKEDITOR.instances.des.getData(),screenShot:img_array.toString(),itemType:$("#single_select_item_type").val(),urlGiftcodeFile:$(".uploaded_giftcode").val(),status:$(".select_status option:selected").val(),hasPromotion:$("[name='my-checkbox']").bootstrapSwitch("state")},1==$("[name='my-checkbox']").bootstrapSwitch("state")){if(!validateFormShopItemPromotion())return;_send_info.data.promotion={promotionId:$("#promotion_select").val(),tagView:$(".txt_promotion_tag_view").val(),newPrice:$(".txt_promotion_price").val(),shopItem:editing_item,quantity:$(".txt_promotion_quantity").val()}}$(".loading_icon").show(),$.ajax({url:base_request_url+"/admin/shopingItem",type:"POST",data:JSON.stringify(_send_info.data),contentType:"application/json",dataType:"json",beforeSend:function(e){e.setRequestHeader("Authorization","bearer "+_user_data.access_token)},success:function(e){page_datatable.ajax.reload(null,!1),"01"==e.status?(show_toast_notif("success","Successfully","Created '"+$(".txt_add_edit_item_name").val()+"'",function(){}),$("#modal_add_edit").modal("hide")):show_toast_notif("error","Fail",e.message,function(){}),$(".loading_icon").hide()},error:function(e){show_toast_notif("error","Fail","Error '"+e.responseText+"'",function(){}),$(".loading_icon").hide()}})}else show_toast_notif("error","Unable to update "+item_name,item_name+" Chưa điền Package id");else show_toast_notif("error","Unable to create "+item_name,item_name+" name is required")}),$("#single_select_item_type").change(function(){2==$(this).val()?($(".giftcode_group").show(),$(".form-package").hide()):3==$(this).val()?($(".form-package").show(),$(".giftcode_group").hide()):($(".giftcode_group").hide(),$(".form-package").hide())}),$(".btn_modal_save_update").click(function(){if(""!=$(".txt_add_edit_item_name").val())if(3!=$("#single_select_item_type").val()||""!=$(".txt_add_edit_item_package_id").val()){if(_send_info.data={id:editing_item,name:$(".txt_add_edit_item_name").val(),hotTitle:$("#single_select_hot_title").val(),packageId:$(".txt_add_edit_item_package_id").val(),price:$(".txt_add_edit_item_price").val(),coinType:$("#single_select_coin_type").val(),quantity:$(".txt_add_edit_item_quantity").val(),shopId:$("#single_select_shop").val(),defaultImage:$(".image_item_icon img").attr("src"),bigImage:$(".image_item_big_image img").attr("src"),firstType:$("#single_select_gender").val(),secondType:$("#single_select_category").val(),description:CKEDITOR.instances.des.getData(),screenShot:img_array.toString(),itemType:$("#single_select_item_type").val(),urlGiftcodeFile:$(".uploaded_giftcode").val(),status:$(".select_status option:selected").val(),hasPromotion:$("[name='my-checkbox']").bootstrapSwitch("state")},1==$("[name='my-checkbox']").bootstrapSwitch("state")){if(!validateFormShopItemPromotion())return;_send_info.data.promotion={promotionId:$("#promotion_select").val(),tagView:$(".txt_promotion_tag_view").val(),newPrice:$(".txt_promotion_price").val(),shopItem:editing_item,quantity:$(".txt_promotion_quantity").val()}}$(".loading_icon").show(),$.ajax({url:base_request_url+"/admin/shopingItem",type:"PUT",data:JSON.stringify(_send_info.data),contentType:"application/json",dataType:"json",beforeSend:function(e){e.setRequestHeader("Authorization","bearer "+_user_data.access_token)},success:function(e){page_datatable.ajax.reload(null,!1),"01"==e.status?(show_toast_notif("success","Successfully","Updated '"+$(".txt_add_edit_item_name").val()+"'",function(){}),$("#modal_add_edit").modal("hide")):show_toast_notif("error","Fail",e.message,function(){}),$(".loading_icon").hide()},error:function(e){show_toast_notif("error","Fail","Error '"+e.responseText+"'",function(){}),$(".loading_icon").hide()}})}else show_toast_notif("error","Unable to update "+item_name,item_name+" Chưa điền Package id");else show_toast_notif("error","Unable to update "+item_name,item_name+" name is required")}),$(".select_status").change(function(){""!=$(this).val()&&("active"==$(this).val()?$(".select_status button").css("background-color","#32c5d2"):"inactive"==$(this).val()&&$(".select_status button").css("background-color","red"),$(".hidden_item_status").val($(this).val()))}),$("#single_select_item_type").change(function(){""!=$(this).val()&&(2==$(this).val()?$(".giftcode_group").show():$(".giftcode_group").hide())}),$(".search_submit").click(function(){search_value=$(".search_input").val(),page_datatable.ajax.reload(null,!1)}),$(".search_clear").click(function(){$(".search_input").val(""),search_value="",page_datatable.ajax.reload(null,!1)}),$(".form_datetime").datetimepicker({autoclose:!0,isRTL:App.isRTL(),format:"yyyy-MM-dd HH:ii",pickerPosition:App.isRTL()?"bottom-right":"bottom-left"}),$.ajax({url:base_request_url+"/admin/shoping",type:"GET",data:_send_info.data,contentType:"application/json",dataType:"json",beforeSend:function(e){e.setRequestHeader("Authorization","bearer "+_user_data.access_token)},success:function(e){$(e.dataArr).each(function(e,t){$("#single_select_shop").append("<option value='"+t.id+"'> "+t.name+"</option>")}),load_autocomplete_component()},error:function(e){console.log(e.error())}}),$(".btn_modal_upload_giftcode").click(function(){$(".loading_icon").show();var e=new FormData($("#form_upload_giftcode")[0]);$.ajax({url:base_request_url+"/admin/uploadFile",type:"POST",data:e,cache:!1,contentType:!1,timeout:3e6,processData:!1,beforeSend:function(e){e.setRequestHeader("Authorization","bearer "+_user_data.access_token)},success:function(e){"T"==e.statusCode?(show_toast_notif("success","Successfully","Uploaded "),img_array.push(e.dataObj),$("#modal_add_edit .image_item_giftcode").html("<img src='http://icons.iconarchive.com/icons/alecive/flatwoken/128/Apps-Google-Drive-Sheets-icon.png' />"),$(".uploaded_giftcode").val(e.dataObj)):show_toast_notif("error","Fail",e.onlyMessage),$(".loading_icon").hide()},error:function(e){show_toast_notif("error","Fail","Error '"+e.responseText+"'"),$(".loading_icon").hide()}})}),$(".btn_modal_upload").click(function(){$(".loading_icon").show();var e=new FormData($("#form_upload")[0]);$.ajax({url:base_request_url+"/admin/uploadFile",type:"POST",data:e,cache:!1,contentType:!1,timeout:3e6,processData:!1,beforeSend:function(e){e.setRequestHeader("Authorization","bearer "+_user_data.access_token)},success:function(e){"T"==e.statusCode?(show_toast_notif("success","Successfully","Uploaded "),img_array.push(e.dataObj),$("#modal_add_edit .image_item").append("<img src='"+e.dataObj+"' />")):show_toast_notif("error","Fail",e.onlyMessage),$(".loading_icon").hide()},error:function(e){show_toast_notif("error","Fail","Error '"+e.responseText+"'"),$(".loading_icon").hide()}})}),$(".btn_modal_upload_icon").click(function(){var t=$(this).parent().parent().parent().next().children().next().children().children();linkImage=null,$(".loading_icon").show(),e(t),null!=linkImage?$("#modal_add_edit .image_item_icon").html("<img src="+linkImage+" />"):show_toast_notif("error","Có lỗi khi upload ảnh")}),$(".btn_modal_upload_big_image").click(function(){var t=$(this).parent().parent().parent().next().children().next().children().children();linkImage=null,$(".loading_icon").show(),e(t),null!=linkImage?$("#modal_add_edit .image_item_big_image").html("<img src="+linkImage+" />"):show_toast_notif("error","Có lỗi khi upload ảnh")}),$(".txt_add_edit_item_upload").change(function(){var e=$(this).parent().parent().parent().next().children().next().children();linkOldImage=null,linkImage=null,flagNewImage=!1,imageCarosel=null;var t=this.files[0];(t="image/jpeg"==t.type||"image/png"==t.type||"image/jpg"==t.type||"image/gif"==t.type)?(linkOldImage=e.children().attr("src"),e.html("<img src="+URL.createObjectURL(this.files[0])+" />"),imageCarosel=this.files[0],flagNewImage=!0):show_toast_notif("error","Error","Không Đúng Định Dạng Ảnh",function(){})}),$.ajax({url:base_request_url+"/admin/shopingPromotion",type:"GET",cache:!1,contentType:!1,timeout:3e6,processData:!1,beforeSend:function(e){e.setRequestHeader("Authorization","bearer "+_user_data.access_token)},success:function(e){"T"==e.statusCode?(console.log("data",e.dataArr),$.each(e.dataArr,function(e,t){$("#promotion_select").append("<option value='"+t.id+"'> "+t.name+"</option>")})):show_toast_notif("error","Fail",e.onlyMessage),$(".loading_icon").hide()},error:function(e){show_toast_notif("error","Fail","Error '"+e.responseText+"'"),$(".loading_icon").hide()}}),$("[name='my-checkbox']").on("switchChange.bootstrapSwitch",function(e,t){t?$(".form-promotion input, .form-promotion select").removeAttr("disabled"):$(".form-promotion input, .form-promotion select").attr("disabled","disabled")})};jQuery(document).ready(function(){Page_script.init(),load_page(),$("[name='my-checkbox']").bootstrapSwitch()});