function str_pad(e){return String("00"+e).slice(-2)}function uploadImageGoogleDriver(e,a){if(!flagNewImage||null==e||null==e)return $(".loading_icon").hide(),null;var t=new FormData;t.append("file",e),$(".loading_icon").show(),$.ajax({url:base_request_url+"/admin/uploadFile",type:"POST",data:t,cache:!1,async:!1,contentType:!1,timeout:3e6,processData:!1,beforeSend:function(e){e.setRequestHeader("Authorization","bearer "+_user_data.access_token)},success:function(e){page_datatable.ajax.reload(null,!1),"T"==e.statusCode?($(".loading_icon").hide(),show_toast_notif("success","Successfully","Upload image success"),linkImage=e.dataObj):($(".loading_icon").hide(),show_toast_notif("error","Fail","Upload Image Unsuccess"))},error:function(e){$(".loading_icon").hide(),show_toast_notif("error","Fail","Error '"+e.message+"'")}})}function uploadImageGame(e,a){if(flagNewImage&&null!=e&&null!=e){var t=new FormData;t.append("image",e),$(".loading_icon").show(),$.ajax({url:base_request_url+"/admin/uploadImage",type:"POST",data:t,cache:!1,async:!1,contentType:!1,timeout:3e6,processData:!1,beforeSend:function(e){e.setRequestHeader("Authorization","bearer "+_user_data.access_token)},success:function(e){"01"==e.status?(linkImage=e.data,"logo"==a&&""!==$("#modal_add_edit .txt_add_edit_item_link_logo").html()&&deleteImageGame($("#modal_add_edit .txt_add_edit_item_link_logo").html()),"cover"==a&&""!==$("#modal_add_edit .txt_add_edit_item_link_cover").html()&&deleteImageGame($("#modal_add_edit .txt_add_edit_item_link_cover").html()),$(".loading_icon").hide(),show_toast_notif("success","Successfully","Add new image success")):($(".loading_icon").hide(),show_toast_notif("error","Fail","Upload Image Unsuccess"))},error:function(e){show_toast_notif("error","Fail","Error '"+e.message+"'"),$(".loading_icon").hide()}})}}function deleteImageGame(e){flagNewImage&&(_send_info.data={urlImage:e},$.ajax({url:base_request_url+"/admin/deleteImage",type:"POST",data:JSON.stringify(_send_info.data),cache:!1,async:!1,contentType:"application/json",dataType:"json",beforeSend:function(e){e.setRequestHeader("Authorization","bearer "+_user_data.access_token)},success:function(e){page_datatable.ajax.reload(null,!1),"01"==e.status?(flagNewImage=!1,$(".loading_icon").hide(),show_toast_notif("success","Successfully","Add new and Delete old image success")):(show_toast_notif("error","Fail","Delete Image Unsuccess"),$(".loading_icon").hide())},error:function(e){show_toast_notif("error","Fail","Error '"+e.message+"'"),$(".loading_icon").hide()}}))}function objectifyForm(e){for(var a={},t=0;t<e.length;t++)a[e[t].name]=e[t].value;return a}var editing_item=null,item_name="Game",item_names="Games",deleted_id=null,search_value=null,page_datatable=null,deleted_obj=null,load_autocomplete_component=null;_current_page=1;var typingTimer,doneTypingInterval=500,searching_value_timeout="",tag_array=[],img_array=[],flagNewImage=!1,imageLogo=null,imageCover=null,imageScreenshot=null,linkImage=null,Page_script={init:function(){}};_send_info.data={limit:1e3,offset:0},$.ajax({url:base_request_url+"/anonymous/splayTag",type:"GET",data:_send_info.data,contentType:"application/json",dataType:"json",success:function(e){$(".loading_icon").hide(),$(e.data).each(function(e,a){$("#single_select_game_tag").append("<option value='"+a.id+"'> "+a.name+"</option>")}),load_autocomplete_component()},error:function(e){console.log(e.error())}});var load_page=function(){var e=function(e){tag_array.splice(tag_array.indexOf(parseInt(e)),1)},a=function(e){img_array.splice(img_array.indexOf(e),1)};_send_info.data={limit:_per_page,offset:_per_page*(_current_page-1)},$(".bs-select").selectpicker({iconBase:"fa",tickIcon:"fa-check"}),page_datatable=$("#page_datatable").DataTable({ajax:{url:base_request_url+"/admin/splayGame",type:"GET",data:function(e){null!=search_value&&""!=search_value&&(e.searchValue=search_value),e.limit=_per_page,e.offset=_per_page*(_current_page-1)},contentType:"application/json",dataType:"json",dataSrc:function(e){var a=0;if($(".datatable_paging").html(""),e.totalRecords>_per_page)for(a=1;a<=Math.ceil(e.totalRecords/_per_page);a++)a==_current_page?$(".datatable_paging").append("<span class='datatable_paging_number_active' page="+a+">"+a+"</span>"):1!=a&&a!=Math.ceil(e.totalRecords/_per_page)&&a!=_current_page-1&&a!=_current_page-2&&a!=_current_page+2&&a!=_current_page+1||(1==a&&_current_page>4?($(".datatable_paging").append("<span class='datatable_paging_number' page="+a+">"+a+"</span>"),$($(".datatable_paging_number")[0]).after("<span class='paging_truncate'>...</span>")):a==Math.ceil(e.totalRecords/_per_page)&&_current_page<Math.ceil(e.totalRecords/_per_page)-3?($(".datatable_paging").append("<span class='datatable_paging_number' page="+a+">"+a+"</span>"),$($(".datatable_paging_number")[$(".datatable_paging_number").length-1]).before("<span class='paging_truncate'>...</span>")):$(".datatable_paging").append("<span class='datatable_paging_number' page="+a+">"+a+"</span>"));else $(".datatable_paging").html("<span class='datatable_paging_number_active' page=1>1</span>");return $(".datatable_paging_number").click(function(e){_current_page=parseInt($(e.target).attr("page")),page_datatable.ajax.reload()}),null!=e.data?e.data:[]},beforeSend:function(e){e.setRequestHeader("Authorization","bearer "+_user_data.access_token)},error:function(e,a,t){"invalid_token"==JSON.parse(e.responseText).error&&(localStorage.removeItem("user_data"),document.location.replace("login"))}},responsive:!0,columns:[{title:"ID",data:"id"},{title:"Name",data:"name"},{title:"Status",data:null,render:function(e,a,t,i){return e="active"==t.status?"<div class='active_status'>"+t.status+"</div>":"<div class='inactive_status'>"+t.status+"</div>",e}},{title:"Create On",data:null,render:function(e,a,t,i){var n=moment(t.createOn).format("YYYY-MMMM-D HH:mm");return n}},{title:"Update On",data:null,render:function(e,a,t,i){var n=moment(t.updateOn).format("YYYY-MMMM-D HH:mm");return n}},{title:"Action",data:null,render:function(e,a,t,i){var n="";return n+="<a class='btn_edit_item' item_id='"+t.id+"' item_obj='"+JSON.stringify(t)+"'><i class='icon-wrench'></i> Edit </a>",n+="<a class='btn_delete_item' item_id='"+t.id+"' item_obj='"+JSON.stringify(t)+"'><i class='icon-trash'></i> Delete </a>",n}}],aoColumnDefs:[{responsivePriority:1,sWidth:"2%",aTargets:[0]},{responsivePriority:2,sWidth:"10%",aTargets:[1]},{responsivePriority:2,sWidth:"5%",aTargets:[2]},{responsivePriority:2,sWidth:"5%",aTargets:[3]},{responsivePriority:2,sWidth:"5%",aTargets:[4]},{responsivePriority:1,sWidth:"10%",aTargets:[5]}],autoWidth:!1,lengthChange:!1,info:!1,bSort:!1,bFilter:!1,bPaginate:!1,fnDrawCallback:function(t){$("div.dataTables_wrapper div.dataTables_filter label").contents().filter(function(){return 1!=this.nodeType}).replaceWith(""),$(".btn_edit_item").click(function(){var t=JSON.parse($(this).attr("item_obj"));editing_item=t.id,$("#modal_add_edit .modal-title").html("Edit "+item_name+" "+t.name),$("#modal_add_edit .txt_add_edit_item_name").val(t.name),$("#modal_add_edit .logo_img").css("background-image","url("+t.defaultImage+")"),$("#modal_add_edit .txt_add_edit_item_link_logo").html(t.defaultImage),$("#modal_add_edit .cover_img").css("background-image","url("+t.bigImage+")"),$("#modal_add_edit .txt_add_edit_item_link_cover").html(t.bigImage),$("#modal_add_edit .txt_add_edit_item_screenshot").val(t.screenShot),$("#modal_add_edit .txt_add_edit_item_channel_id").val(t.youtubeChannelId),$("#modal_add_edit .txt_add_edit_item_search_key").val(t.youtubeDefaultSearch),$("#modal_add_edit .txt_add_edit_item_download").val(t.downloadTurns),$("#modal_add_edit .txt_add_edit_item_fb").val(t.fanpageFB),$("#modal_add_edit .txt_add_edit_item_group_fb").val(t.groupFB),$("#modal_add_edit #single_select_game_type").val(t.gameType),$(".txt_add_edit_item_webgame_url").val(t.webgameUrl),$("#modal_add_edit #single_select_sub_title").val(t.subTitle),$("#modal_add_edit .txt_add_edit_item_android").val(t.urlDownloadAndroid),$("#modal_add_edit .txt_add_edit_item_ios").val(t.urlDownloadIos),$("#modal_add_edit .txt_add_edit_item_pc").val(t.urlDownloadPC),$("#modal_add_edit .txt_add_edit_item_scoin_id").val(t.scoinGameId),$("#modal_add_edit .txt_add_edit_item_des").val(t.description),$(".image_item").html(""),"WEBGAME"==$("#modal_add_edit #single_select_game_type").val()?$(".group-webgame-url").show():$(".group-webgame-url").hide(),void 0!==CKEDITOR.instances.des&&CKEDITOR.instances.des.destroy(),CKEDITOR.replace("des",{height:"300px"}),CKEDITOR.instances.des.setData(t.description),$(".current_tags").html(""),tag_array=[],$.each(t.tagsList,function(e,a){$(".current_tags").append(" <span class='tag label label-info' tag_id="+a.id+"><i class='fa fa-tags'></i> "+a.name+"<span  class='remove_tag' data-role='remove'></span></span>"),tag_array.push(a.id)}),$(".image_item").html(""),img_array=[],null!==t.screenShot&&$.each(t.screenShot.split(","),function(e,a){""!==a&&($(".image_item").append(" <img class='remove_image' src='"+a+"' />"),img_array.push(a))}),$(".remove_image").click(function(){a($(this).attr("src")),console.log("img_array",img_array),flagNewImage=!0,deleteImageGame($(this).attr("src")),$(this).remove()}),$(".current_tags .remove_tag").click(function(){e($(this).parent().attr("tag_id")),$(this).parent().remove()}),$("#modal_add_edit .txt_add_edit_item_publisher").val(t.publisher),$("#modal_add_edit .btn_modal_save_new").hide(),$("#modal_add_edit .btn_modal_save_update").show(),$(".select_status option").filter(function(){return $.trim($(this).val())==t.status}).prop("selected",!0),$(".select_status").selectpicker("refresh"),"active"==t.status?$(".select_status button").css("background-color","#32c5d2"):$(".select_status button").css("background-color","red"),load_autocomplete_component(),$(".btn_delete_item").show(),$(".btn_delete_item").attr("item_id",t.id),$("#modal_add_edit").modal("show")}),$(".btn_delete_item").click(function(){var e=JSON.parse($(this).attr("item_obj"));deleted_obj=e,deleted_id=e.id,$("#modal_confirm").modal("show")})}}),$("#modal_add_edit #single_select_game_type").change(function(){"WEBGAME"==$(this).val()?$(".group-webgame-url").show():$(".group-webgame-url").hide()}),$(".txt_add_edit_item_file_logo").change(function(){var e=this.files[0];(e="image/jpeg"==e.type||"image/png"==e.type||"image/jpg"==e.type||"image/gif"==e.type)?(imageLogo=this.files[0],$("#modal_add_edit .txt_add_edit_item_image_logo").css("background-image","url("+URL.createObjectURL(imageLogo)+")"),flagNewImage=!0,$(".txt_add_edit_item_file_logo").val("")):(show_toast_notif("error","Error","Không Đúng Định Dạng Ảnh",function(){}),imageLogo=null)}),$(".btn_modal_upload_image_logo").click(function(){uploadImageGame(imageLogo,"logo"),null==linkImage?show_toast_notif("error","Lỗi Tải Ảnh","Chưa chọn ảnh",function(){}):($("#modal_add_edit .txt_add_edit_item_link_logo").html(linkImage),linkImage=null)}),$(".txt_add_edit_item_file_cover").change(function(){var e=this.files[0];(e="image/jpeg"==e.type||"image/png"==e.type||"image/jpg"==e.type||"image/gif"==e.type)?(imageCover=this.files[0],$("#modal_add_edit .txt_add_edit_item_image_cover").css("background-image","url("+URL.createObjectURL(imageCover)+")"),flagNewImage=!0,$(".btn_modal_upload_image_cover").val("")):(imageCover=null,show_toast_notif("error","Error","Không Đúng Định Dạng Ảnh",function(){}))}),$(".btn_modal_upload_image_cover").click(function(){uploadImageGame(imageCover,"cover"),null==linkImage?show_toast_notif("error","Lỗi Tải Ảnh","Chưa chọn ảnh",function(){}):($("#modal_add_edit .txt_add_edit_item_link_cover").html(linkImage),linkImage=null)}),$(".btn_modal_upload_image_screenshot").click(function(){flagNewImage=!0,uploadImageGame($(".txt_add_edit_item_image_screenshot")[0].files[0],""),img_array.push(linkImage),$("#modal_add_edit .image_item").append("<img class='remove_image' src='"+linkImage+"' />"),$(".remove_image").click(function(){a($(this).attr("src")),console.log("img_array",img_array),flagNewImage=!0,deleteImageGame($(this).attr("src")),$(this).remove()})}),$(".select2, .select2-multiple, .select2-allow-clear, .js-data-example-ajax").on("select2:open",function(){if($(this).parents("[class*='has-']").length)for(var e=$(this).parents("[class*='has-']")[0].className.split(/\s+/),a=0;a<e.length;++a)e[a].match("has-")&&$("body > .select2-container").addClass(e[a])}),load_autocomplete_component=function(){function a(e){if(e.loading)return e.text;var a="<div class='select2-result-repository clearfix'><div class='select2-result-repository__avatar'><img src='"+e.owner.avatar_url+"' /></div><div class='select2-result-repository__meta'><div class='select2-result-repository__title'>"+e.full_name+"</div>";return e.description&&(a+="<div class='select2-result-repository__description'>"+e.description+"</div>"),a+="<div class='select2-result-repository__statistics'><div class='select2-result-repository__forks'><span class='glyphicon glyphicon-flash'></span> "+e.forks_count+" Forks</div><div class='select2-result-repository__stargazers'><span class='glyphicon glyphicon-star'></span> "+e.stargazers_count+" Stars</div><div class='select2-result-repository__watchers'><span class='glyphicon glyphicon-eye-open'></span> "+e.watchers_count+" Watchers</div></div></div></div>",a}function t(e){return e.full_name||e.text}$.fn.select2.defaults.set("theme","bootstrap");var i="Type to search";$(".select2, .select2-multiple").select2({placeholder:i,width:null}),$(".select2-allow-clear").select2({allowClear:!0,placeholder:i,width:null}),$(".js-data-example-ajax").select2({width:"off",ajax:{url:"https://api.github.com/search/repositories",dataType:"json",delay:250,data:function(e){return{q:e.term,page:e.page}},processResults:function(e,a){return{results:e.items}},cache:!0},escapeMarkup:function(e){return e},minimumInputLength:1,templateResult:a,templateSelection:t}),$("button[data-select2-open]").click(function(){$("#"+$(this).data("select2-open")).select2("open")}),$(":checkbox").on("click",function(){$(this).parent().nextAll("select").prop("disabled",!this.checked),1==$(this).val()&&$(this).parent().hasClass("checked")?($(".appname_group").show(),$(".txt_add_edit_item_package_android").attr("name","androidPackage"),$(".txt_add_edit_item_package_ios").attr("name","iosSchemes")):1!=$(this).val()||$(this).parent().hasClass("checked")||($(".appname_group").hide(),$(".txt_add_edit_item_package_android").attr("name",""),$(".txt_add_edit_item_package_ios").attr("name","")),3==$(this).val()&&$(this).parent().hasClass("checked")?($(".share_group").show(),$(".txt_add_edit_item_share").attr("name","urlShareFB")):3!=$(this).val()||$(this).parent().hasClass("checked")||($(".share_group").hide(),$(".txt_add_edit_item_share").attr("name",""))}),$(".js-btn-set-scaling-classes").on("click",function(){$("#select2-multiple-input-sm, #select2-single-input-sm").next(".select2-container--bootstrap").addClass("input-sm"),$("#select2-multiple-input-lg, #select2-single-input-lg").next(".select2-container--bootstrap").addClass("input-lg"),$(this).removeClass("btn-primary btn-outline").prop("disabled",!0)}),$("#single_select_game_tag").change(function(){-1==$.inArray(parseInt($("#single_select_game_tag").val()),tag_array)&&(tag_array.push(parseInt($("#single_select_game_tag").val())),$(".current_tags").append(" <span tag_id='"+$("#single_select_game_tag").val()+"' class='tag label label-info'><i class='fa fa-tags'></i> "+$("#single_select_game_tag option:selected").text()+"<span class='remove_tag' data-role='remove'></span></span>"),$(".current_tags .remove_tag").click(function(){e($(this).parent().attr("tag_id")),$(this).parent().remove()}))})},$(".date-picker").datepicker({rtl:App.isRTL(),orientation:"left",autoclose:!0}),$(".btn_add_new_item").click(function(){$(".image_item").html(""),$("#modal_add_edit .modal-title").html("Create new "+item_name),$(".logo_img").css("background-image",""),$(".cover_img").css("background-image",""),$(".view_link").text(""),linkImage=null,$("#modal_add_edit input:text").val(""),$("#modal_add_edit textarea").val(""),$(".select_status option").filter(function(){return"active"==$.trim($(this).val())}).prop("selected",!0),void 0!==CKEDITOR.instances.des&&CKEDITOR.instances.des.destroy(!0),CKEDITOR.replace("des"),$(".select_status").selectpicker("refresh"),$(".select_status button").css("background-color","#32c5d2"),load_autocomplete_component(),$("#modal_add_edit .btn_modal_save_new").show(),$("#modal_add_edit .btn_modal_save_update").hide(),$("#modal_add_edit").modal("show")}),$(".btn_update_position").click(function(){$(".loading_icon").show(),_send_info.data={limit:1e5,offset:0},$.ajax({url:base_request_url+"/admin/splayGame",type:"GET",data:_send_info.data,contentType:"application/json",dataType:"json",beforeSend:function(e){e.setRequestHeader("Authorization","bearer "+_user_data.access_token)},success:function(e){$("#items").html(""),$(e.data).each(function(e,a){$("#items").append("<li item_id="+a.id+" class='list channel_position'>"+a.name+"</li>")}),$("#items").sortable({placeholder:"highlight",start:function(e,a){a.item.toggleClass("highlight")},stop:function(e,a){a.item.toggleClass("highlight")}}),$("#items").disableSelection(),$("#modal_update_position").modal("show"),$(".loading_icon").hide()},error:function(e){console.log(e.error()),$(".loading_icon").hide()}})}),$(".btn_confirm_yes").click(function(){$.ajax({url:base_request_url+"/admin/splayGame?splayGameId="+deleted_id,type:"DELETE",contentType:"application/json",dataType:"json",beforeSend:function(e){e.setRequestHeader("Authorization","bearer "+_user_data.access_token)},success:function(){$("#modal_confirm").modal("hide"),_send_info.data={},page_datatable.ajax.reload(),$("#modal_add_edit").modal("hide"),show_toast_notif("success","Successfully","Deleted: '"+deleted_obj.name+"'",function(){})},error:function(e){show_toast_notif("error","Error","'"+e.responseText+"'",function(){})}})}),$(".btn_modal_save_new").click(function(){""!=$(".txt_add_edit_item_name").val()?"WEBGAME"!=$("#single_select_game_type").val()||""!=$(".txt_add_edit_item_webgame_url").val()?(_send_info.data={name:$(".txt_add_edit_item_name").val(),defaultImage:$(".txt_add_edit_item_link_logo").text(),bigImage:$(".txt_add_edit_item_link_cover").text(),fanpageFB:$(".txt_add_edit_item_fb").val(),groupFB:$(".txt_add_edit_item_group_fb").val(),urlDownloadIos:$(".txt_add_edit_item_ios").val(),urlDownloadAndroid:$(".txt_add_edit_item_android").val(),urlDownloadPC:$(".txt_add_edit_item_pc").val(),youtubeChannelId:$(".txt_add_edit_item_channel_id").val(),youtubeDefaultSearch:$(".txt_add_edit_item_search_key").val(),downloadTurns:$(".txt_add_edit_item_download").val(),gameType:$("#single_select_game_type").val(),webgameUrl:$(".txt_add_edit_item_webgame_url").val(),subTitle:$("#single_select_sub_title").val(),scoinGameId:$(".txt_add_edit_item_scoin_id").val(),publisher:$("#single_select_publisher").val(),description:CKEDITOR.instances.des.getData().toString().replace(/\&quot;/g,""),screenShot:img_array.toString(),tagList:tag_array,status:$(".select_status option:selected").val()},console.log("img_array.toString() : ",img_array.toString()),$(".loading_icon").show(),$.ajax({url:base_request_url+"/admin/splayGame",type:"POST",data:JSON.stringify(_send_info.data),contentType:"application/json",dataType:"json",beforeSend:function(e){e.setRequestHeader("Authorization","bearer "+_user_data.access_token)},success:function(e){page_datatable.ajax.reload(null,!1),"01"==e.status?(show_toast_notif("success","Successfully","Created '"+$(".txt_add_edit_item_name").val()+"'",function(){}),$("#modal_add_edit").modal("hide")):show_toast_notif("error","Fail",e.onlyMessage,function(){}),$(".loading_icon").hide()},error:function(e){show_toast_notif("error","Fail","Error '"+e.responseText+"'",function(){}),$(".loading_icon").hide()}})):show_toast_notif("error","Unable to create "+item_name,item_name+" Chưa điềm URL webgame"):show_toast_notif("error","Unable to create "+item_name,item_name+" name is required")}),$(".btn_modal_save_update").click(function(){""!=$(".txt_add_edit_item_name").val()?"WEBGAME"!=$("#single_select_game_type").val()||""!=$(".txt_add_edit_item_webgame_url").val()?(_send_info.data={id:editing_item,name:$(".txt_add_edit_item_name").val(),defaultImage:$(".txt_add_edit_item_link_logo").text(),bigImage:$(".txt_add_edit_item_link_cover").text(),groupFB:$(".txt_add_edit_item_group_fb").val(),fanpageFB:$(".txt_add_edit_item_fb").val(),urlDownloadIos:$(".txt_add_edit_item_ios").val(),youtubeChannelId:$(".txt_add_edit_item_channel_id").val(),youtubeDefaultSearch:$(".txt_add_edit_item_search_key").val(),urlDownloadAndroid:$(".txt_add_edit_item_android").val(),urlDownloadPC:$(".txt_add_edit_item_pc").val(),downloadTurns:$(".txt_add_edit_item_download").val(),gameType:$("#single_select_game_type").val(),webgameUrl:$(".txt_add_edit_item_webgame_url").val(),subTitle:$("#single_select_sub_title").val(),scoinGameId:$(".txt_add_edit_item_scoin_id").val(),publisher:$("#single_select_publisher").val(),screenShot:img_array.toString(),tagList:tag_array,description:CKEDITOR.instances.des.getData().toString().replace(/\&quot;/g,""),status:$(".select_status option:selected").val()},$(".loading_icon").show(),$.ajax({url:base_request_url+"/admin/splayGame",type:"PUT",data:JSON.stringify(_send_info.data),contentType:"application/json",dataType:"json",beforeSend:function(e){e.setRequestHeader("Authorization","bearer "+_user_data.access_token)},success:function(e){page_datatable.ajax.reload(null,!1),"01"==e.status?(show_toast_notif("success","Successfully","Updated '"+$(".txt_add_edit_item_name").val()+"'",function(){}),$("#modal_add_edit").modal("hide")):show_toast_notif("error","Fail",e.onlyMessage,function(){}),$(".loading_icon").hide()},error:function(e){show_toast_notif("error","Fail","Error '"+e.responseText+"'",function(){}),$(".loading_icon").hide()}})):show_toast_notif("error","Unable to create "+item_name,item_name+" Chưa điềm URL webgame"):show_toast_notif("error","Unable to update "+item_name,item_name+" name is required")}),$(".select_status").change(function(){""!=$(this).val()&&("active"==$(this).val()?$(".select_status button").css("background-color","#32c5d2"):"inactive"==$(this).val()&&$(".select_status button").css("background-color","red"),$(".hidden_item_status").val($(this).val()))}),$(".btn_modal_save_position").click(function(){$(".loading_icon").show();var e=[],a=1;$(".channel_position").each(function(t,i){e.push({id:$(i).attr("item_id"),position:a}),a++}),$.ajax({url:base_request_url+"/admin/splayGamePosition",type:"PUT",data:JSON.stringify({dataRequest:e}),contentType:"application/json",dataType:"json",beforeSend:function(e){e.setRequestHeader("Authorization","bearer "+_user_data.access_token)},success:function(e){_send_info.data={},page_datatable.ajax.reload(null,!1),"01"==e.status?show_toast_notif("success","Successfully","Positions are updated",function(){}):show_toast_notif("error","Error","'"+e.onlyMessage+"'",function(){}),$("#modal_update_position").modal("hide"),$(".loading_icon").hide()},error:function(e){show_toast_notif("error","Error","'"+e.responseText+"'",function(){}),$(".loading_icon").hide()}})}),$(".search_submit").click(function(){search_value=$(".search_input").val(),page_datatable.ajax.reload(null,!1)}),$(".search_clear").click(function(){$(".search_input").val(""),search_value="",page_datatable.ajax.reload(null,!1)}),$(".form_datetime").datetimepicker({autoclose:!0,isRTL:App.isRTL(),format:"yyyy-MM-dd HH:ii",pickerPosition:App.isRTL()?"bottom-right":"bottom-left"}),$(".btn_modal_upload").click(function(){$(".loading_icon").show();var e=new FormData($("#form_upload")[0]);$.ajax({url:base_request_url+"/admin/uploadFile",type:"POST",data:e,cache:!1,contentType:!1,timeout:3e6,processData:!1,beforeSend:function(e){e.setRequestHeader("Authorization","bearer "+_user_data.access_token)},success:function(e){"T"==e.statusCode?(show_toast_notif("success","Successfully","Uploaded "),img_array.push(e.dataObj),$("#modal_add_edit .image_item").append("<img src='"+e.dataObj+"' />")):show_toast_notif("error","Fail",e.onlyMessage),$(".loading_icon").hide()},error:function(e){show_toast_notif("error","Fail","Error '"+e.responseText+"'"),$(".loading_icon").hide()}})})};jQuery(document).ready(function(){Page_script.init(),load_page()});