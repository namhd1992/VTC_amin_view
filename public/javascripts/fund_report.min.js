function str_pad(e){return String("00"+e).slice(-2)}var editing_item=null,item_name="Outcome Report",item_names="Outcome Report",deleted_id=null,channel_arr=[],page_datatable=null;_current_page=1;var search_value=null,start_time=null,end_time=null,from_amount=null,to_amount=null,payment_type=null,doneTypingInterval=1e3,searching_value_timeout="",typingTimer,transaction_scoin_id=null,Page_script=function(){return{init:function(){}}}(),load_page=function(){$(".loading_icon").show(),_send_info.data={limit:_per_page,offset:0},$(".bs-select").selectpicker({iconBase:"fa",tickIcon:"fa-check"});page_datatable=$("#page_datatable").DataTable({ajax:{url:base_request_url+"/admin/moneyFunds",type:"GET",data:function(e){return e},contentType:"application/json",dataType:"json",dataSrc:function(e){var t=[],a=0,n=0,i=0;$(e.dataArr).each(function(e,t){"income"==t.type?(n+=parseInt(t.fundsAmount),a+=parseInt(t.fundsAmount)):(i+=parseInt(t.fundsAmount),a+=parseInt(t.fundsAmount))}),t.push({number:"Income",LP:n,LP:n}),t.push({number:"Outcome",LP:i,LP:i});var l=Highcharts.getOptions().colors,s=0,r=[];r.push({y:parseFloat((parseInt(n)/a*100).toFixed(2)),color:l[s],value:parseInt(n)}),s++,r.push({y:parseFloat((parseInt(i)/a*100).toFixed(2)),color:l[s],value:parseInt(i)}),s++;var o=["Income","Outcome"],c=[],d=t.length;for(_=0;_<d;_+=1)c.push({name:o[_]+" ("+r[_].value+") ",y:r[_].y,color:r[_].color});Highcharts.chart("pieChart1",{chart:{type:"pie"},title:{text:"Overview"},credits:{enabled:!1},plotOptions:{pie:{shadow:!1,center:["50%","50%"]}},tooltip:{valueSuffix:"%"},series:[{name:"Income chart",data:c,size:"100%",dataLabels:{formatter:function(){return this.y>5?this.point.name:null},color:"#ffffff",distance:-30}}]});var _=0;if($(".datatable_paging").html(""),e.totalRecords>_per_page)for(_=1;_<=Math.ceil(e.totalRecords/_per_page);_++)_==_current_page?$(".datatable_paging").append("<span class='datatable_paging_number_active' page="+_+">"+_+"</span>"):1!=_&&_!=Math.ceil(e.totalRecords/_per_page)&&_!=_current_page-1&&_!=_current_page-2&&_!=_current_page+2&&_!=_current_page+1||(1==_&&_current_page>4?($(".datatable_paging").append("<span class='datatable_paging_number' page="+_+">"+_+"</span>"),$($(".datatable_paging_number")[0]).after("<span class='paging_truncate'>...</span>")):_==Math.ceil(e.totalRecords/_per_page)&&_current_page<Math.ceil(e.totalRecords/_per_page)-3?($(".datatable_paging").append("<span class='datatable_paging_number' page="+_+">"+_+"</span>"),$($(".datatable_paging_number")[$(".datatable_paging_number").length-1]).before("<span class='paging_truncate'>...</span>")):$(".datatable_paging").append("<span class='datatable_paging_number' page="+_+">"+_+"</span>"));else $(".datatable_paging").html("<span class='datatable_paging_number_active' page=1>1</span>");return $(".datatable_paging_number").click(function(e){_current_page=parseInt($(e.target).attr("page")),page_datatable.ajax.reload()}),$(".widget_total_input").attr("data-value",e.dataObj.dataResponse.inputFundsAmount),$(".widget_total_output").attr("data-value",e.dataObj.dataResponse.outputFundsAmount),$(".widget_total_count").attr("data-value",e.totalRecords),$(".widget_total_input").counterUp(),$(".widget_total_output").counterUp(),$(".widget_total_count").counterUp(),e.dataArr},beforeSend:function(e){e.setRequestHeader("Authorization","bearer "+_user_data.access_token)},error:function(e,t,a){"invalid_token"==JSON.parse(e.responseText).error&&(localStorage.removeItem("user_data"),document.location.replace("login"))}},columns:[{title:"ID",data:"id"},{title:"Name",data:"fundsName"},{title:"Type",data:"type"},{title:"Amount",data:"fundsAmount"},{title:"Action",data:null,render:function(e,t,a,n){var i="";return i+="income"==a.type?"<a class='btn_detail_link' item_id='"+a.id+"' href='/income_report?id="+a.id+"'><i class='icon-calendar'></i> Details </a>":"<a class='btn_detail_link' item_id='"+a.id+"' href='/outcome_report?id="+a.id+"'><i class='icon-calendar'></i> Details </a>"}}],aoColumnDefs:[{sWidth:"3%",aTargets:[0]},{sWidth:"20%",aTargets:[1]},{sWidth:"20%",aTargets:[2]},{sWidth:"20%",aTargets:[3]},{sWidth:"20%",aTargets:[4]}],autoWidth:!1,lengthChange:!1,info:!1,bSort:!1,bPaginate:!1,bFilter:!1,fnDrawCallback:function(e){$("div.dataTables_wrapper div.dataTables_filter label").contents().filter(function(){return 1!=this.nodeType}).replaceWith(""),$("div.dataTables_wrapper div.dataTables_filter label input").addClass("form-control"),$("div.dataTables_wrapper div.dataTables_filter label input").addClass("input-inline"),$("div.dataTables_wrapper div.dataTables_filter label input").addClass("input-medium"),$("div.dataTables_wrapper div.dataTables_filter label input").attr("placeholder","Search..."),$("div.dataTables_wrapper div.dataTables_filter label input").attr("id","inputSuccess"),$(".btn_edit_item").click(function(){var e=JSON.parse($(this).attr("item_obj"));console.log(e),$(".info_transaction_scoin_id").html(e.transactionScoinId),$(".info_scoin_acc").html(e.accountScoinId),$(".info_amount").html(e.totalPayment),$(".info_type").html(e.paymentType),$(".info_gameid").html(e.gameID),$(".info_state").html(e.errorDesc);var t=getSetting(_setting_data,"date_format"),a=moment.unix(e.createOn/1e3).format(t.value);$(".info_created_on").html(a),$("#modal_add_edit").modal("show")}),$(".btn_delete_item").click(function(){deleted_id=parseInt($(this).attr("item_id")),$("#modal_confirm").modal("show")})}});var e=function(){function e(e){if(e.loading)return e.text;var t="<div class='select2-result-repository clearfix'><div class='select2-result-repository__avatar'><img src='"+e.owner.avatar_url+"' /></div><div class='select2-result-repository__meta'><div class='select2-result-repository__title'>"+e.full_name+"</div>";return e.description&&(t+="<div class='select2-result-repository__description'>"+e.description+"</div>"),t+="<div class='select2-result-repository__statistics'><div class='select2-result-repository__forks'><span class='glyphicon glyphicon-flash'></span> "+e.forks_count+" Forks</div><div class='select2-result-repository__stargazers'><span class='glyphicon glyphicon-star'></span> "+e.stargazers_count+" Stars</div><div class='select2-result-repository__watchers'><span class='glyphicon glyphicon-eye-open'></span> "+e.watchers_count+" Watchers</div></div></div></div>"}function t(e){return e.full_name||e.text}$.fn.select2.defaults.set("theme","bootstrap");var a="Type to search";$(".select2, .select2-multiple").select2({placeholder:a,width:null}),$(".select2-allow-clear").select2({allowClear:!0,placeholder:a,width:null}),$(".js-data-example-ajax").select2({width:"off",ajax:{url:"https://api.github.com/search/repositories",dataType:"json",delay:250,data:function(e){return{q:e.term,page:e.page}},processResults:function(e,t){return{results:e.items}},cache:!0},escapeMarkup:function(e){return e},minimumInputLength:1,templateResult:e,templateSelection:t}),$("button[data-select2-open]").click(function(){$("#"+$(this).data("select2-open")).select2("open")}),$(":checkbox").on("click",function(){$(this).parent().nextAll("select").prop("disabled",!this.checked)}),$(".js-btn-set-scaling-classes").on("click",function(){$("#select2-multiple-input-sm, #select2-single-input-sm").next(".select2-container--bootstrap").addClass("input-sm"),$("#select2-multiple-input-lg, #select2-single-input-lg").next(".select2-container--bootstrap").addClass("input-lg"),$(this).removeClass("btn-primary btn-outline").prop("disabled",!0)}),$("#single_select").change(function(){})};$.ajax({url:base_request_url+"/admin/user",type:"GET",data:{limit:10,offset:0},contentType:"application/json",dataType:"json",beforeSend:function(e){e.setRequestHeader("Authorization","bearer "+_user_data.access_token)},success:function(t){$(t.dataArr).each(function(e,t){$("#single_select_user").append("<option value='"+t.id+"'> "+t.username+"</option>")}),e(),$(".loading_icon").hide()},error:function(e){$(".loading_icon").hide(),console.log(e.error())}}),$(".date-picker").datepicker({rtl:App.isRTL(),orientation:"left",autoclose:!0}),$(".btn_add_new_item").click(function(){$("#modal_add_edit .modal-title").html("Create new "+item_name),$("#modal_add_edit input:text").val(""),$(".txt_add_edit_item_channel").attr("name","channelId"),channel_arr=[],$(".current_channels").html(""),$("#modal_add_edit .btn_modal_save_new").show(),$("#modal_add_edit .btn_modal_save_update").hide(),$("#modal_add_edit").modal("show")}),$(".search_submit").click(function(){payment_type=$("#single_select_payment_type").val(),start_time=$(".txt_add_edit_item_dateStart").val(),end_time=$(".txt_add_edit_item_dateEnd").val(),from_amount=$(".txt_add_edit_item_from_amount").val(),to_amount=$(".txt_add_edit_item_to_amount").val(),transaction_scoin_id=$(".txt_add_edit_item_transaction_scoin").val(),page_datatable.ajax.reload(null,!1)}),$(".search_clear").click(function(){$("#single_select_payment_type").val(""),$(".txt_add_edit_item_dateStart").val(""),$(".txt_add_edit_item_dateEnd").val(""),$(".txt_add_edit_item_from_amount").val(""),$(".txt_add_edit_item_to_amount").val(""),e(),payment_type=null,start_time=null,end_time=null,from_amount=null,to_amount=null,page_datatable.ajax.reload(null,!1)}),$(".select2, .select2-multiple, .select2-allow-clear, .js-data-example-ajax").on("select2:open",function(){if($(this).parents("[class*='has-']").length)for(var t=$(this).parents("[class*='has-']")[0].className.split(/\s+/),a=0;a<t.length;++a)t[a].match("has-")&&$("body > .select2-container").addClass(t[a]);"single_select_user"==$(this).attr("id")&&(typing_input=$(".select2-search__field")[0],$(typing_input).on("keypress",function(){console.log("press"),clearTimeout(typingTimer),typingTimer=setTimeout(function(){_send_info.data={limit:10,offset:0,searchValue:$(typing_input).val()},searching_value_timeout=$(typing_input).val(),$("#single_select_user").html(""),$.ajax({url:base_request_url+"/admin/user",type:"GET",data:_send_info.data,contentType:"application/json",dataType:"json",beforeSend:function(e){e.setRequestHeader("Authorization","bearer "+_user_data.access_token)},success:function(t){console.log("success");$(t.dataArr).each(function(e,t){$("#single_select_user").append("<option value='"+t.id+"'> "+t.username+"</option>")}),e(),$("#single_select_user").select2("open"),$($(".select2-search__field")[0]).val(searching_value_timeout)},error:function(e){console.log("error"),console.log(e.error())}})},doneTypingInterval)}))})};jQuery(document).ready(function(){Page_script.init(),load_page()});